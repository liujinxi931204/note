redis支持RDB和AOF两种持久化机制，持久化功能能够有效地避免因进程退出而造成的数据丢失问题，当下次重启时利用之前持久化的文件即可实现数据恢复  
## RDB  
RDB持久化是把当前进程数据生成快照保存到硬盘的过程，触发RBD持久化过程分为手动触发和自动触发  
### 触发机制  
手动触发分别对应save和bgsave命令：
+ save命令：阻塞当前redis服务器，直到RDB过程完成为止，对于内存比较大的实例会造成长时间阻塞  
+ bgsave命令：redis进程执行fork操作创建子进程，RDB持久化过程由子进程负责，完成后自动结束。阻塞值发生在fork阶段，一半时间很短  
1. 使用save相关配置，如"save m n",表示m秒内数据集存在n次修改时，自动触发bgsave  
2. 如果从节点执行全量复制操作，主节点自动执行bgsave生成RDB文件并发送给从节点  
3. 执行debug reload命令重新加载redis时，也会自动触发save操作  
4. 默认情况下执行shutdown命令时，如果没有开启AOF持久化功能则会自动执行bgsave  
### 流程说明  
![title](https://raw.githubusercontent.com/liujinxi931204/image/master/gitnote/2020/09/18/1600416227834-1600416227895.png)  
